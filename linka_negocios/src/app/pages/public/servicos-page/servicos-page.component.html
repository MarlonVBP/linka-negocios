<div class="page-wrapper">
 <header class="header">
  <app-sidebar-cliente></app-sidebar-cliente>
 </header>

 <main class="container">
  <section class="header-title">
   <p>Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit…</p>
  </section>

  <section class="cont">
   <app-servicos-carousel [items]="servicos"></app-servicos-carousel>
  </section>

  <section class="cont_avalicoes">
   <section class="row header_avaliacoes">
    <section class="col">
     <span class="title">Testemunhos</span>
    </section>
    <section class="col">
     <span class="text">
      Mais social prof com testemunhos de clientes ou reviews do produto/serviços prestados
     </span>
    </section>
   </section>
   <section class="row main_avaliacoes">
    <section class="col avaliacao" *ngFor="let avaliacao of this.avaliacoes">
     <section class="row cont">
      <section class="col rating" [innerHTML]="avaliacao.avaliacao"></section>
      <section class="col content">
       “{{avaliacao.conteudo}}”
      </section>
      <section class="cont_user">
       <section class="col user-avatar">
        <img src="images/user.png" alt="Avatar da pessoa">
       </section>
       <section class="col user-info">
        <span class="user-name">{{avaliacao.user_name}}</span>
        <span>{{avaliacao.profissao}}</span>
       </section>
      </section>
     </section>
    </section>
   </section>
  </section>
  <section class="col button_avaliacoes cont_button">
   <button class="button" (click)="this.openModal()">Ver mais</button>
   <button class="button" (click)="this.openModalForm()">Comentar</button>
  </section>
 </main>

 <footer class="footer">
  <section class="row footer_avaliacoes">
   <section class="col title_footer">
    <span class="footer_text">Porque que a pessoa deve clicar</span>
    <span>“Conectando talentos, otimizando processos, impulsionando vendas”</span>
   </section>
   <section class="col cont_button">
    <button class="button">Saiba mais</button>
   </section>
  </section>
  <app-footer></app-footer>
 </footer>
</div>


<div class="modal" *ngIf="isModalOpen">
 <div class="modal-content">
  <form class="form" [formGroup]="comentariosForm" (submit)="submitApplication()">
   <div class="title">
    <div class="title_header">
     <img src="images/message.png" alt="">
     <span>Deixe um comentário</span>
    </div>
    <div class="rating" (mouseleave)="reset()">
     <div class="cont_avaliacao">
      <span *ngFor="let star of stars; let i = index" (click)="rate(i + 1)" (mouseover)="hover(i + 1)"
       [ngClass]="{'filled': i < rating || i < hoverState}">
       &#9733;
      </span>
     </div>
     <div>
      <span #messageRating class="message_rating">Lembre-se de avaliar</span>
     </div>

    </div>
   </div>
   <div class="container_input grande">
    <label for="conteudo">Conteúdo<span>*</span></label>
    <textarea id="conteudo" formControlName="conteudo" required></textarea>
    <div class="error-message "
     *ngIf="comentariosForm.get('conteudo')!.invalid && (comentariosForm.get('conteudo')!.dirty || comentariosForm.get('conteudo')!.touched)">
     Conteúdo inválido
    </div>
   </div>
   <div class="container_input grande">
    <label for="profissao">Profissão<span>*</span></label>
    <input id="profissao" type="text" formControlName="profissao" required>
    <div class="error-message "
     *ngIf="comentariosForm.get('profissao')!.invalid && (comentariosForm.get('profissao')!.dirty || comentariosForm.get('profissao')!.touched)">
     Profissão inválida
    </div>
   </div>
   <div class="inputs_ident">
    <div class="container_input">
     <label for="email">Email <span>*</span></label>
     <input id="email" type="email" formControlName="email" required />
     <div class="error-message"
      *ngIf="comentariosForm.get('email')!.invalid && (comentariosForm.get('email')!.dirty || comentariosForm.get('email')!.touched)">
      Email inválido
     </div>
    </div>
    <div class="container_input">
     <label for="nome">Nome<span>*</span></label>
     <input id="nome" type="text" formControlName="nome" required />
     <div class="error-message"
      *ngIf="comentariosForm.get('nome')!.invalid && (comentariosForm.get('nome')!.dirty || comentariosForm.get('nome')!.touched)">
      Nome inválido
     </div>
    </div>
   </div>
   <div class="buttons_form">
    <button type="submit" class="primary">publicar</button>
    <button type="submit" class="primary" (click)="this.closeModalForm()">Fechar</button>
   </div>
  </form>
 </div>
</div>