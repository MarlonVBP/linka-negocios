<div class="page-wrapper">
    <header class="header">
        <app-sidebar-cliente></app-sidebar-cliente>
    </header>

    <main class="container">
        <section class="header-title">
            <p>Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit…</p>
        </section>

        <section class="cont">
            <app-servicos-carousel></app-servicos-carousel>
        </section>

        <app-avaliacoes class="avaliacoes_container" [avaliacoes]="this.avaliacoes"></app-avaliacoes>

        <section class="col button_avaliacoes cont_button">
            <button *ngIf="this.avaliacoes.length > 3" class="button" (click)="this.openModal()">Ver mais</button>
            <button class="button" (click)="this.openModalForm()">Comentar</button>
        </section>
    </main>

    <footer class="footer">
        <section class="row footer_avaliacoes">
            <section class="col title_footer">
                <span class="footer_text">Saiba como podemos transformar seu negócio com soluções sob medida.</span>
                <span>“Conectando talentos, otimizando processos, impulsionando vendas”</span>
            </section>
            <section class="col cont_button">
                <button class="button">Saiba mais</button>
            </section>
        </section>
        <app-footer></app-footer>
    </footer>
    <app-icone-whatsapp></app-icone-whatsapp>
</div>


<div class="modal" *ngIf="isModalOpen">
    <div class="modal-content">
        <form class="form" [formGroup]="comentariosForm" (submit)="submitApplication()">
            <div class="title">
                <div class="title_header">
                    <img src="images/message.png" alt="">
                    <span>Deixe um comentário</span>
                </div>
                <div class="rating" (mouseleave)="reset()">
                    <div class="cont_avaliacao">
                        <span *ngFor="let star of stars; let i = index" (click)="rate(i + 1)" (mouseover)="hover(i + 1)"
                            [ngClass]="{'filled': i < rating || i < hoverState}">
                            &#9733;
                        </span>
                    </div>
                    <div>
                        <span #messageRating class="message_rating">Lembre-se de avaliar</span>
                    </div>
                </div>
            </div>
            <div class="container_input grande">
                <label for="conteudo">Conteúdo<span>*</span></label>
                <textarea id="conteudo" formControlName="conteudo" placeholder="Digite o conteudo..." required
                    maxlength="200"></textarea>
                <div class="error-message"
                    *ngIf="comentariosForm.get('conteudo')!.invalid && (comentariosForm.get('conteudo')!.dirty || comentariosForm.get('conteudo')!.touched)">
                    {{ getErrorMessage('conteudo') }}
                </div>
            </div>

            <div class="container_input grande">
                <label for="email">Email <span>*</span></label>
                <input id="email" type="email" formControlName="email" placeholder="Digite o seu email..." required />
                <div class="error-message"
                    *ngIf="comentariosForm.get('email')!.invalid && (comentariosForm.get('email')!.dirty || comentariosForm.get('email')!.touched)">
                    {{ getErrorMessage('email') }}
                </div>
            </div>
            <div class="container_input grande">
                <label for="nome">Nome<span>*</span></label>
                <input id="nome" type="text" formControlName="nome" placeholder="Digite o seu nome e sobrenome..."
                    required maxlength="20" />
                <div class="error-message"
                    *ngIf="comentariosForm.get('nome')!.invalid && (comentariosForm.get('nome')!.dirty || comentariosForm.get('nome')!.touched)">
                    {{ getErrorMessage('nome') }}
                </div>
            </div>
            <div class="inputs_ident">
                <div class="container_input">
                    <label for="profissao">Profissão<span>*</span></label>
                    <input id="profissao" type="text" formControlName="profissao"
                        placeholder="Digite a sua profissão..." required maxlength="20">
                    <div class="error-message"
                        *ngIf="comentariosForm.get('profissao')!.invalid && (comentariosForm.get('profissao')!.dirty || comentariosForm.get('profissao')!.touched)">
                        {{ getErrorMessage('profissao') }}
                    </div>
                </div>
                <div class="container_input">
                    <label for="empresa">Empresa<span>*</span></label>
                    <input id="empresa" type="text" formControlName="empresa" placeholder="Digite a empresa..." required
                        maxlength="20">
                    <div class="error-message"
                        *ngIf="comentariosForm.get('empresa')!.invalid && (comentariosForm.get('empresa')!.dirty || comentariosForm.get('empresa')!.touched)">
                        {{ getErrorMessage('empresa') }}
                    </div>
                </div>
            </div>
            <div class="buttons_form">
                <button type="submit" class="primary">publicar</button>
                <button type="button" class="primary close" (click)="this.closeModalForm()">Fechar</button>
            </div>
        </form>

    </div>
</div>