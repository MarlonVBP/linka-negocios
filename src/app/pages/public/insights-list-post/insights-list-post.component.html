<div class="page-wrapper">
  <header class="header">
    <app-insights-sidebar></app-insights-sidebar>
  </header>

  <main class="container">
    <div class="row header">
      <div class="col cont_img">
        <img [src]="this.apiUrl + post?.url_imagem" alt="" />
      </div>
      <div class="col cont_title">
        <span class="title">{{ post?.titulo }}</span>
        <div class="col cont_autor">
          <span class="autor"
            >Escrito por: <span>{{ post?.usuario_nome }}.</span
            ><span class="data">{{ post?.data }}</span></span
          >
          <app-share-button
            [urlSite]="this.currentUrl"
            [tituloCompartilhado]="this.shareTitle"
          ></app-share-button>
        </div>
      </div>
    </div>

    <div class="line"></div>

    <div class="row main">
      <span [innerHTML]="sanitizedContent"></span>
    </div>

    <div class="row compartilhar">
      <span>Compartilhe:</span>
      <button
        (click)="compartilharRede('linkedin')"
        aria-label="Compartilhar no LinkedIn"
      >
        <svg
          width="34px"
          height="34px"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></g>
          <g id="SVGRepo_iconCarrier">
            <path
              d="M6.5 8C7.32843 8 8 7.32843 8 6.5C8 5.67157 7.32843 5 6.5 5C5.67157 5 5 5.67157 5 6.5C5 7.32843 5.67157 8 6.5 8Z"
              fill="#B22828"
            />
            <path
              d="M5 10C5 9.44772 5.44772 9 6 9H7C7.55228 9 8 9.44771 8 10V18C8 18.5523 7.55228 19 7 19H6C5.44772 19 5 18.5523 5 18V10Z"
              fill="#B22828"
            />
            <path
              d="M11 19H12C12.5523 19 13 18.5523 13 18V13.5C13 12 16 11 16 13V18.0004C16 18.5527 16.4477 19 17 19H18C18.5523 19 19 18.5523 19 18V12C19 10 17.5 9 15.5 9C13.5 9 13 10.5 13 10.5V10C13 9.44771 12.5523 9 12 9H11C10.4477 9 10 9.44772 10 10V18C10 18.5523 10.4477 19 11 19Z"
              fill="#B22828"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M20 1C21.6569 1 23 2.34315 23 4V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H20ZM20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20Z"
              fill="#B22828"
            />
          </g>
        </svg>
      </button>
      <button
        (click)="compartilharRede('facebook')"
        aria-label="Compartilhar no Facebook"
      >
        <img src="images/facebook.png" alt="Compartilhar no Facebook" />
      </button>
      <button
        (click)="compartilharRede('twitter')"
        aria-label="Compartilhar no Twitter"
      >
        <img src="images/twitter.png" alt="Compartilhar no Twitter" />
      </button>
      <button
        (click)="compartilharRede('whatsapp')"
        aria-label="Compartilhar no WhatsApp"
      >
        <svg
          fill="#b22828"
          width="34px"
          height="34px"
          viewBox="0 0 16 16"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="SVGRepo_bgCarrier" stroke-width="0" />

          <g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"
          />

          <g id="SVGRepo_iconCarrier">
            <path
              d="M11.42 9.49c-.19-.09-1.1-.54-1.27-.61s-.29-.09-.42.1-.48.6-.59.73-.21.14-.4 0a5.13 5.13 0 0 1-1.49-.92 5.25 5.25 0 0 1-1-1.29c-.11-.18 0-.28.08-.38s.18-.21.28-.32a1.39 1.39 0 0 0 .18-.31.38.38 0 0 0 0-.33c0-.09-.42-1-.58-1.37s-.3-.32-.41-.32h-.4a.72.72 0 0 0-.5.23 2.1 2.1 0 0 0-.65 1.55A3.59 3.59 0 0 0 5 8.2 8.32 8.32 0 0 0 8.19 11c.44.19.78.3 1.05.39a2.53 2.53 0 0 0 1.17.07 1.93 1.93 0 0 0 1.26-.88 1.67 1.67 0 0 0 .11-.88c-.05-.07-.17-.12-.36-.21z"
            />

            <path
              d="M13.29 2.68A7.36 7.36 0 0 0 8 .5a7.44 7.44 0 0 0-6.41 11.15l-1 3.85 3.94-1a7.4 7.4 0 0 0 3.55.9H8a7.44 7.44 0 0 0 5.29-12.72zM8 14.12a6.12 6.12 0 0 1-3.15-.87l-.22-.13-2.34.61.62-2.28-.14-.23a6.18 6.18 0 0 1 9.6-7.65 6.12 6.12 0 0 1 1.81 4.37A6.19 6.19 0 0 1 8 14.12z"
            />
          </g>
        </svg>
      </button>
    </div>
    <div class="line"></div>

    <div class="cont_comentarios">
      <div class="col cont_title"><span class="title">Comentários</span></div>
      <div class="row form_comentarios">
        <div class="col">
          <form
            class="form"
            [formGroup]="comentariosForm"
            (submit)="submitApplication()"
          >
            <div class="title">
              <div class="title_header">
                <img src="images/message.png" alt="" />
                <span>Deixe um comentário</span>
              </div>
              <div class="rating" (mouseleave)="reset()">
                <div class="cont_avaliacao">
                  <span
                    *ngFor="let star of stars; let i = index"
                    (click)="rate(i + 1)"
                    (mouseover)="hover(i + 1)"
                    [ngClass]="{ filled: i < rating || i < hoverState }"
                  >
                    &#9733;
                  </span>
                </div>
                <div>
                  <span #messageRating class="message_rating"
                    >Lembre-se de avaliar</span
                  >
                </div>
              </div>
            </div>
            <div class="container_input grande">
              <label for="conteudo">Conteúdo<span>*</span></label>
              <textarea
                id="conteudo"
                formControlName="conteudo"
                placeholder="Digite o conteudo..."
                required
                maxlength="200"
              ></textarea>
              <div
                class="error-message"
                *ngIf="
                  comentariosForm.get('conteudo')!.invalid &&
                  (comentariosForm.get('conteudo')!.dirty ||
                    comentariosForm.get('conteudo')!.touched)
                "
              >
                {{ getErrorMessage("conteudo") }}
              </div>
            </div>

            <div class="container_input grande">
              <label for="email">Email <span>*</span></label>
              <input
                id="email"
                type="email"
                formControlName="email"
                placeholder="Digite o seu email..."
                required
              />
              <div
                class="error-message"
                *ngIf="
                  comentariosForm.get('email')!.invalid &&
                  (comentariosForm.get('email')!.dirty ||
                    comentariosForm.get('email')!.touched)
                "
              >
                {{ getErrorMessage("email") }}
              </div>
            </div>
            <div class="container_input grande">
              <label for="nome">Nome<span>*</span></label>
              <input
                id="nome"
                type="text"
                formControlName="nome"
                placeholder="Digite o seu nome e sobrenome..."
                required
                maxlength="20"
              />
              <div
                class="error-message"
                *ngIf="
                  comentariosForm.get('nome')!.invalid &&
                  (comentariosForm.get('nome')!.dirty ||
                    comentariosForm.get('nome')!.touched)
                "
              >
                {{ getErrorMessage("nome") }}
              </div>
            </div>
            <div class="inputs_ident">
              <div class="container_input">
                <label for="profissao">Profissão<span>*</span></label>
                <input
                  id="profissao"
                  type="text"
                  formControlName="profissao"
                  placeholder="Digite a sua profissão..."
                  required
                  maxlength="20"
                />
                <div
                  class="error-message"
                  *ngIf="
                    comentariosForm.get('profissao')!.invalid &&
                    (comentariosForm.get('profissao')!.dirty ||
                      comentariosForm.get('profissao')!.touched)
                  "
                >
                  {{ getErrorMessage("profissao") }}
                </div>
              </div>
              <div class="container_input">
                <label for="empresa">Empresa<span>*</span></label>
                <input
                  id="empresa"
                  type="text"
                  formControlName="empresa"
                  placeholder="Digite a empresa..."
                  required
                  maxlength="20"
                />
                <div
                  class="error-message"
                  *ngIf="
                    comentariosForm.get('empresa')!.invalid &&
                    (comentariosForm.get('empresa')!.dirty ||
                      comentariosForm.get('empresa')!.touched)
                  "
                >
                  {{ getErrorMessage("empresa") }}
                </div>
              </div>
            </div>
            <div class="buttons_form">
              <button type="submit" class="primary">publicar</button>
            </div>
          </form>
        </div>
      </div>
      <app-avaliacoes [avaliacoes]="this.comentarios"></app-avaliacoes>
      <section
        class="col button_avaliacoes cont_button"
        *ngIf="comentarios.length > 3"
      >
        <button class="button" (click)="openModal()">Ver mais</button>
      </section>
    </div>
  </main>

  <app-icone-whatsapp></app-icone-whatsapp>

  <footer class="footer">
    <app-footer></app-footer>
  </footer>
</div>
